version: '3'

services:
    database:
        image: mysql:5.7
        environment:
            - MYSQL_DATABASE=main
            - MYSQL_USER=spring
            - MYSQL_PASSWORD=spring
        ports:
            - '3306'
    configserver:
        build: configserver/
        environment:
            ENCRYPT_KEY: 'mysecret'
        ports:
            - '8888:8888'
    zuulserver:
        build: zuulserver/
        ports:
            - '5555:5555'
        depends_on:
            -  configserver
    authentication:
        build: authentication/
        depends_on:
            - configserver
    eurekaserver:
        build: eurekaserver/
        depends_on:
            - configserver
        ports:
            - '8761:8761'
    licenses:
        build: licenses/
        depends_on:
            - configserver
            - database
    organizations:
        build: organizations
        depends_on:
            - configserver
            - database